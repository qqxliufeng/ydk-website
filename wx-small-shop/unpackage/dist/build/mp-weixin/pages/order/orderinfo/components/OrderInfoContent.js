(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/orderinfo/components/OrderInfoContent"],{"1d1a":function(e,t,n){"use strict";var o=n("a336"),r=n.n(o);r.a},"699a":function(e,t,n){"use strict";n.r(t);var o=n("dddf"),r=n("e796");for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);n("1d1a");var c=n("2877"),a=Object(c["a"])(r["default"],o["a"],o["b"],!1,null,"3b249382",null);t["default"]=a.exports},a336:function(e,t,n){},dddf:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){return e.$refs.ticketInfoWrapper.close()})},r=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r})},e796:function(e,t,n){"use strict";n.r(t);var o=n("eaaa"),r=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t["default"]=r.a},eaaa:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){return n.e("pages/order/orderinfo/components/OrderTicketInfo").then(n.bind(null,"d7c6"))},r=function(){return Promise.all([n.e("common/vendor"),n.e("componets/uni/qrcode/tki-qrcode")]).then(n.bind(null,"453e6"))},i=function(){return n.e("componets/uni/lu-popup-wrapper").then(n.bind(null,"e2d6"))},c={name:"orderInfoContent",props:{scenic:Object,voucher:Array,ticketName:String,ticketNum:Number,refundTickets:String,sendCode:Number,timeLog:Array},components:{orderTicketInfo:o,uniQrcode:r,PopupWrapper:i},data:function(){return{showDialog:!1,postUrl:"",dialogTitle:"长按保存图片到手机",showCode:!1,createOrderTime:"",payOrderTime:"",tempQrCodePath:null,openType:""}},computed:{enableClass:function(){return this.voucher&&this.voucher.length>0&&0===this.voucher[0].use_status?"o-t-i-enable":"o-t-i-unenable"},num:function(){return this.voucher&&this.voucher.length>0?this.$utils.common.splitNum(this.voucher[0].voucher_number):""}},methods:{showFullCode:function(){this.$refs.qrcodeWrapper.show(),this.$refs.qrcode._makeCode()},qrCodeResult:function(e){this.tempQrCodePath=e},downloadImg:function(){var t=this;this.tempQrCodePath&&(this.openType?e.openSetting({success:function(e){e.authSetting["scope.writePhotosAlbum"]&&(t.openType=null,t.makeCanvas())}}):e.authorize({scope:"scope.writePhotosAlbum",success:function(){t.makeCanvas()},fail:function(e){t.openType="openSetting"}}))},makeCanvas:function(){var t=this;try{e.showLoading({title:"生成中…"}),e.getSystemInfo({success:function(n){var o=n.screenWidth,r=15,i=r+5,c=10,a=e.createCanvasContext("ticketInfo",t);a.setFillStyle("#000000"),a.setFontSize(r),a.fillText(t.ticketName+" X"+t.ticketNum,c,i),a.fillText("下单时间："+(t.createOrderTime||"暂无"),c,2*i),a.fillText("支付时间："+(t.payOrderTime||"暂无"),c,3*i),a.fillText("验票时间："+(t.scenic.ticket_check||"暂无"),c,4*i),a.fillText("验票地点："+(t.scenic.ticket_check_info||"暂无"),c,5*i),a.fillText("凭证号：",c,6*i),a.drawImage(t.tempQrCodePath,(.9*o-20-100)/2,7*i,100,100),a.setFontSize(20);var u=a.measureText(t.voucher[0].voucher_number);a.fillText(t.voucher[0].voucher_number,(.9*o-20-u.width)/2,7*i+140),a.draw(),t.$refs.ticketInfoWrapper.show()}})}catch(n){console.log(n)}finally{e.hideLoading()}},saveTicketInfoImage:function(){var t=this;this.$refs.ticketInfoWrapper.close(),e.canvasToTempFilePath({canvasId:"ticketInfo",success:function(n){e.saveImageToPhotosAlbum({filePath:n.tempFilePath,success:function(){t.$toast("图片保存成功")},fail:function(e){console.log("保存失败"+e)}})}},this)}},mounted:function(){var e=this;this.timeLog.forEach(function(t,n){"下单时间"===t.type?e.createOrderTime=t.ctime:"支付时间"===t.type&&(e.payOrderTime=t.ctime)})}};t.default=c}).call(this,n("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/order/orderinfo/components/OrderInfoContent-create-component',
    {
        'pages/order/orderinfo/components/OrderInfoContent-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("699a"))
        })
    },
    [['pages/order/orderinfo/components/OrderInfoContent-create-component']]
]);                
