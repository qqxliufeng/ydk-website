(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/reseve/components/TicketInfo"],{"177c":function(t,e,n){"use strict";n.r(e);var i=n("b158"),s=n("ac43");for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);n("3912");var o=n("2877"),c=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,"1770449c",null);e["default"]=c.exports},3912:function(t,e,n){"use strict";var i=n("761c"),s=n.n(i);s.a},"64a1":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){return n.e("pages/reseve/components/ReseveNotice").then(n.bind(null,"392f"))},s=function(){return n.e("componets/uni/uni-number-box").then(n.bind(null,"f46d"))},a=function(){return n.e("componets/uni/calendar/Calendar").then(n.bind(null,"c0a8"))},o=function(){return n.e("componets/uni/lu-popup-wrapper").then(n.bind(null,"e2d6"))},c={name:"TicketInfo",props:{ticketInfo:Object},components:{ReseveNotice:i,uniNumberBox:s,Calendar:a,PopupWrapper:o},data:function(){return{animation:t.createAnimation({duration:300,timingFunction:"linear",delay:0}),animationData:null,num:1,minNum:1,showCalendar:!1,showRemark:!1,times:[{date:"",week:"",price:"0",count:0,salesId:"",isEnable:!1,isSelected:!1,raw:{}},{date:"",week:"",price:"0",count:0,salesId:"",isEnable:!1,isSelected:!1,raw:{}},{date:"",week:"",price:"0",count:0,salesId:"",isEnable:!1,isSelected:!1,raw:{}}],events:[],tempEvents:{},tempTime:{date:"",price:"0",count:0,isEnable:!1,isSelected:!1,raw:{}}}},computed:{remarks:function(){if(this.ticketInfo){var t=[];for(var e in this.ticketInfo.goods)this.ticketInfo.goods[e]instanceof Object&&t.push(this.ticketInfo.goods[e]);return t}return[]}},methods:{initDate:function(){var t=this,e=new Date;this.times.forEach(function(n,i){t.setTimesItem(e,n,i)});var n=this.times.filter(function(t,e,n){return t.isEnable});n&&n.length>0&&(n[0].isSelected=!0,this.tempTime=n[0],this.emit())},timeItemClick:function(t){this.tempTime=t,this.num=1,this.times.forEach(function(e){e.isSelected=e===t}),this.emit()},select:function(e){var n=this;if(e.price){var i=new Date(e.date.year,Number(e.date.month)-1,e.date.day);this.times.forEach(function(t,e){n.setTimesItem(i,t,e)}),this.tempTime=this.times[0],this.emit(),this.dismissCalendarDialog()}else t.showToast({title:"所选日期暂无票的信息，请重新选择…"})},setTimesItem:function(t,e,n){e.date=this.$utils.dateAdd(t,n).date,e.week=this.$utils.dateAdd(t,n).week;var i=this.tempEvents[e.date];e.isEnable=this.tempEvents.hasOwnProperty(e.date)&&i&&i.one_stock&&0!==parseInt(i.one_stock)&&-2!==parseInt(i.one_stock),e.count=e.isEnable&&i?i.one_stock:0,e.price=i?i.sale_price:"0",e.isSelected=e.isEnable&&0===n,e.raw=i},releaseCount:function(t){return null===t?"":-1===t||-2===t||0===t?"":"余"+t+"张"},maxCount:function(t){return-1===t?Number.MAX_VALUE:-2===t?1:t||1},collection:function(){this.$emit("collection")},onNumberChange:function(t){this.num=t,this.emit()},emit:function(){this.$emit("selected",{item:this.tempTime.raw,num:this.num})},showRemarkDialog:function(){this.$refs.noticeWrapper.show()},dismissRemarkDialog:function(){this.$refs.noticeWrapper.close()},showCalendarDialog:function(){this.showCalendar=!0,this.animation.translateY(0).step(),this.animationData=this.animation.export()},dismissCalendarDialog:function(){this.showCalendar=!1,this.animation.translateY(667).step(),this.animationData=this.animation.export()},init:function(){var t=this;this.ticketInfo.calendar?(this.ticketInfo.calendar.constructor===Object?(this.tempTime.count=this.ticketInfo.calendar.one_stock||0,this.tempTime.price=this.ticketInfo.calendar.sale_price,this.tempTime.raw=this.ticketInfo.calendar,this.minNum=this.ticketInfo.goods.min_number,this.num=this.minNum,this.emit()):(this.ticketInfo.calendar.forEach(function(e){e.oneStock&&(e.one_stock=e.oneStock),e.stock=t.releaseCount(e.one_stock),e.price="￥"+e.sale_price,t.events.push({date:e.date,price:e}),t.tempEvents[e.date]=e}),this.minNum=this.ticketInfo.goods.min_number,this.num=this.minNum,this.initDate()),this.showRemark=!0,setTimeout(function(){t.$nextTick(function(){t.$refs.noticeWrapper.show()})},50)):this.$toast("此票今日暂不销售")}}};e.default=c}).call(this,n("543d")["default"])},"761c":function(t,e,n){},ac43:function(t,e,n){"use strict";n.r(e);var i=n("64a1"),s=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=s.a},b158:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.times,function(e,n){var i=t.$utils.getWeekByWeek(e.week);return{$orig:t.__get_orig(e),g0:i}}));t.$mp.data=Object.assign({},{$root:{l0:n}})},s=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s})}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/reseve/components/TicketInfo-create-component',
    {
        'pages/reseve/components/TicketInfo-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("177c"))
        })
    },
    [['pages/reseve/components/TicketInfo-create-component']]
]);                
